<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWIP Database Agent - Data Management & Analytics</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .cognitive-gradient { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .ai-pulse { animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        .agent-card { transition: all 0.2s ease; }
        .agent-card:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        .status-online { background: #10b981; }
        .status-warning { background: #f59e0b; }
        .status-offline { background: #ef4444; }
        .status-indicator { width: 8px; height: 8px; border-radius: 50%; display: inline-block; margin-right: 8px; }
        .query-box { background: #1f2937; color: #e5e7eb; border-radius: 8px; padding: 1rem; font-family: 'Courier New', monospace; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Header -->
    <div class="cognitive-gradient text-white p-6">
        <div class="container mx-auto">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <div class="w-12 h-12 bg-white bg-opacity-20 rounded-lg flex items-center justify-center">
                        <i class="fas fa-database text-white text-xl"></i>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold">AWIP Database Agent</h1>
                        <p class="text-blue-100">Data Management & Analytics Platform</p>
                    </div>
                </div>
                <div class="text-right">
                    <div class="text-sm opacity-90">Agent #2</div>
                    <div class="flex items-center">
                        <span class="status-indicator status-online"></span>
                        <span class="text-sm">Connected</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div class="container mx-auto p-6">
        <!-- Quick Stats -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
            <div class="agent-card bg-white rounded-lg p-6 shadow-lg">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">Database Health</p>
                        <p class="text-3xl font-bold text-green-600">99.8%</p>
                        <p class="text-xs text-gray-500">Uptime</p>
                    </div>
                    <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                        <i class="fas fa-heartbeat text-green-600"></i>
                    </div>
                </div>
            </div>
            <div class="agent-card bg-white rounded-lg p-6 shadow-lg">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">Query Performance</p>
                        <p class="text-3xl font-bold text-blue-600">1.2ms</p>
                        <p class="text-xs text-gray-500">Avg response time</p>
                    </div>
                    <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
                        <i class="fas fa-tachometer-alt text-blue-600"></i>
                    </div>
                </div>
            </div>
            <div class="agent-card bg-white rounded-lg p-6 shadow-lg">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">Active Connections</p>
                        <p class="text-3xl font-bold text-purple-600">247</p>
                        <p class="text-xs text-gray-500">Current sessions</p>
                    </div>
                    <div class="w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center">
                        <i class="fas fa-plug text-purple-600"></i>
                    </div>
                </div>
            </div>
            <div class="agent-card bg-white rounded-lg p-6 shadow-lg">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-sm font-medium text-gray-600">Data Storage</p>
                        <p class="text-3xl font-bold text-orange-600">2.4TB</p>
                        <p class="text-xs text-gray-500">Total size</p>
                    </div>
                    <div class="w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center">
                        <i class="fas fa-hdd text-orange-600"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Real-time Query Monitor -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h3 class="text-lg font-semibold mb-4 flex items-center">
                    <i class="fas fa-search mr-2 text-blue-600"></i>
                    Real-time Query Monitor
                </h3>
                <div class="space-y-4">
                    <div class="query-box">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-green-400 text-sm">Query #1247</span>
                            <span class="text-blue-400 text-sm">0.8ms</span>
                        </div>
                        <div class="text-sm">SELECT * FROM agents WHERE status = 'active';</div>
                    </div>
                    <div class="query-box">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-green-400 text-sm">Query #1248</span>
                            <span class="text-blue-400 text-sm">1.2ms</span>
                        </div>
                        <div class="text-sm">UPDATE system_status SET last_updated = NOW();</div>
                    </div>
                    <div class="query-box">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-yellow-400 text-sm">Query #1249</span>
                            <span class="text-orange-400 text-sm">15.3ms</span>
                        </div>
                        <div class="text-sm">SELECT COUNT(*) FROM deployment_logs WHERE created_at > '2025-01-01';</div>
                    </div>
                </div>
            </div>

            <!-- Database Health Metrics -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h3 class="text-lg font-semibold mb-4 flex items-center">
                    <i class="fas fa-chart-line mr-2 text-green-600"></i>
                    Performance Metrics
                </h3>
                <div class="space-y-4">
                    <div class="flex items-center justify-between">
                        <span class="text-sm font-medium">CPU Usage</span>
                        <div class="flex items-center space-x-2">
                            <div class="w-32 bg-gray-200 rounded-full h-2">
                                <div class="bg-green-600 h-2 rounded-full" style="width: 35%"></div>
                            </div>
                            <span class="text-sm text-gray-600">35%</span>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-sm font-medium">Memory Usage</span>
                        <div class="flex items-center space-x-2">
                            <div class="w-32 bg-gray-200 rounded-full h-2">
                                <div class="bg-blue-600 h-2 rounded-full" style="width: 62%"></div>
                            </div>
                            <span class="text-sm text-gray-600">62%</span>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-sm font-medium">Disk I/O</span>
                        <div class="flex items-center space-x-2">
                            <div class="w-32 bg-gray-200 rounded-full h-2">
                                <div class="bg-purple-600 h-2 rounded-full" style="width: 28%"></div>
                            </div>
                            <span class="text-sm text-gray-600">28%</span>
                        </div>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-sm font-medium">Network I/O</span>
                        <div class="flex items-center space-x-2">
                            <div class="w-32 bg-gray-200 rounded-full h-2">
                                <div class="bg-orange-600 h-2 rounded-full" style="width: 45%"></div>
                            </div>
                            <span class="text-sm text-gray-600">45%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Database Tables Overview -->
        <div class="mt-8 bg-white rounded-lg shadow-lg p-6">
            <h3 class="text-lg font-semibold mb-4 flex items-center">
                <i class="fas fa-table mr-2 text-indigo-600"></i>
                Database Tables Overview
            </h3>
            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Table Name</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Rows</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Size</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Last Updated</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">agents</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">247</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">1.2MB</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">Healthy</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2 min ago</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">system_status</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">1,456</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">3.7MB</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">Healthy</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">30 sec ago</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">deployment_logs</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">8,923</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">15.2MB</td>
                            <td class="px-6 py-4 whitespace-nowrap">
                                <span class="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">Healthy</span>
                            </td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">1 min ago</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="mt-8 bg-white rounded-lg shadow-lg p-6">
            <h3 class="text-lg font-semibold mb-4 flex items-center">
                <i class="fas fa-bolt mr-2 text-yellow-600"></i>
                Database Operations
            </h3>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <button class="flex flex-col items-center p-4 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors">
                    <i class="fas fa-backup text-blue-600 text-xl mb-2"></i>
                    <span class="text-sm font-medium">Backup</span>
                </button>
                <button class="flex flex-col items-center p-4 bg-green-50 hover:bg-green-100 rounded-lg transition-colors">
                    <i class="fas fa-sync text-green-600 text-xl mb-2"></i>
                    <span class="text-sm font-medium">Optimize</span>
                </button>
                <button class="flex flex-col items-center p-4 bg-purple-50 hover:bg-purple-100 rounded-lg transition-colors">
                    <i class="fas fa-search text-purple-600 text-xl mb-2"></i>
                    <span class="text-sm font-medium">Query</span>
                </button>
                <button class="flex flex-col items-center p-4 bg-orange-50 hover:bg-orange-100 rounded-lg transition-colors">
                    <i class="fas fa-chart-bar text-orange-600 text-xl mb-2"></i>
                    <span class="text-sm font-medium">Analyze</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="bg-white border-t mt-12 py-6">
        <div class="container mx-auto px-6 text-center text-gray-600">
            <p>&copy; 2025 AWIP Database Agent â¢ Data Management & Analytics Platform</p>
        </div>
    </div>

    <script>
        // Database Agent Class
        class DatabaseAgent {
            constructor() {
                this.agentId = 2;
                this.status = 'active';
                this.supabaseUrl = 'https://nkjckkaqcdscrtzmmyyt.supabase.co';
                this.capabilities = [
                    'performance_monitoring',
                    'backup_management',
                    'query_optimization',
                    'real_time_analytics',
                    'schema_management',
                    'security_auditing'
                ];
            }

            async monitorPerformance() {
                const metrics = {
                    cpu_usage: Math.floor(Math.random() * 40) + 20,
                    memory_usage: Math.floor(Math.random() * 30) + 50,
                    disk_io: Math.floor(Math.random() * 20) + 20,
                    network_io: Math.floor(Math.random() * 25) + 30,
                    active_connections: Math.floor(Math.random() * 50) + 200,
                    avg_query_time: (Math.random() * 2 + 0.5).toFixed(1)
                };
                return metrics;
            }

            async executeQuery(query) {
                console.log('Executing query:', query);
                const startTime = Date.now();
                // Simulate query execution
                await new Promise(resolve => setTimeout(resolve, Math.random() * 100));
                const endTime = Date.now();
                return {
                    success: true,
                    executionTime: endTime - startTime,
                    rowsAffected: Math.floor(Math.random() * 1000)
                };
            }

            async getTableStats() {
                return [
                    { name: 'agents', rows: 247, size: '1.2MB', status: 'healthy' },
                    { name: 'system_status', rows: 1456, size: '3.7MB', status: 'healthy' },
                    { name: 'deployment_logs', rows: 8923, size: '15.2MB', status: 'healthy' },
                    { name: 'database_operations', rows: 2341, size: '5.1MB', status: 'healthy' }
                ];
            }

            async communicateWithAgent(agentId, message) {
                console.log(`Database Agent communicating with Agent ${agentId}:`, message);
                return { acknowledged: true, agentId: this.agentId };
            }
        }

        // Initialize Database Agent
        const databaseAgent = new DatabaseAgent();
        window.awipDatabaseAgent = databaseAgent;

        // Real-time updates
        setInterval(async () => {
            const metrics = await databaseAgent.monitorPerformance();
            console.log('Database performance update:', metrics);
        }, 30000);
    </script>
</body>
</html>